{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "billing-settings-2",
  "type": "registry:block",
  "title": "Billing Settings 2",
  "description": "A comprehensive billing settings component with tabs for general, payment methods, invoices, and usage limits",
  "dependencies": ["currency-codes"],
  "registryDependencies": [
    "button",
    "card",
    "input",
    "label",
    "select",
    "switch",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/billing-settings-2.tsx",
      "content": "'use client';\n\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n\tSelect,\n\tSelectContent,\n\tSelectItem,\n\tSelectTrigger,\n\tSelectValue,\n} from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { cn } from '@/lib/utils';\nimport { useState } from 'react';\n\n// Define types for our props\nexport interface FeatureToggle {\n\tid: string;\n\tlabel: string;\n\tdescription: string;\n\tenabled: boolean;\n\tonToggle: (enabled: boolean) => void;\n}\n\nexport interface InputField {\n\tid: string;\n\tname: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n\tplaceholder: string;\n\tonChange: (value: string) => void;\n\tlabel: string;\n\thelperText?: string;\n\ttype?: 'text' | 'email' | 'tel' | 'url' | 'number';\n\trequired?: boolean;\n\tvalidation?: {\n\t\tminLength?: number;\n\t\tmaxLength?: number;\n\t\tpattern?: RegExp;\n\t\tcustomValidator?: (value: string) => string | null;\n\t};\n}\n\nexport interface ValidationError {\n\tfield: string;\n\tmessage: string;\n}\n\nexport interface BillingSettings2Props {\n\tclassName?: string;\n\ttitle?: string;\n\tfeatures?: FeatureToggle[];\n\tinputFields?: InputField[];\n\tonSave?: () => void;\n\tonCancel?: () => void;\n\tsaveButtonText?: string;\n\tcancelButtonText?: string;\n\tcurrencyOptions?: { value: string; label: string }[];\n\tdefaultCurrency?: string;\n\tonCurrencyChange?: (value: string) => void;\n\tenableValidation?: boolean;\n\tcurrencyRequired?: boolean;\n}\n\n// Validation helper functions\nconst validateEmail = (email: string): string | null => {\n\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\tif (!emailRegex.test(email)) {\n\t\treturn \"Please enter a valid email address\";\n\t}\n\treturn null;\n};\n\nconst validateField = (value: string, field: InputField): string | null => {\n\t// Check required validation\n\tif (field.required && !value.trim()) {\n\t\treturn `${field.label} is required`;\n\t}\n\n\t// Skip other validations if field is empty and not required\n\tif (!value.trim() && !field.required) {\n\t\treturn null;\n\t}\n\n\t// Check email validation\n\tif (field.type === 'email') {\n\t\treturn validateEmail(value);\n\t}\n\n\t// Check custom validation\n\tif (field.validation?.customValidator) {\n\t\treturn field.validation.customValidator(value);\n\t}\n\n\t// Check pattern validation\n\tif (field.validation?.pattern && !field.validation.pattern.test(value)) {\n\t\treturn `Invalid ${field.label.toLowerCase()} format`;\n\t}\n\n\t// Check length validations\n\tif (field.validation?.minLength && value.length < field.validation.minLength) {\n\t\treturn `${field.label} must be at least ${field.validation.minLength} characters`;\n\t}\n\n\tif (field.validation?.maxLength && value.length > field.validation.maxLength) {\n\t\treturn `${field.label} must be no more than ${field.validation.maxLength} characters`;\n\t}\n\n\treturn null;\n};\n\nexport function BillingSettings2({\n\tclassName,\n\ttitle = \"Billing Settings\",\n\tfeatures = [\n\t\t{\n\t\t\tid: \"auto-renewal\",\n\t\t\tlabel: \"Auto-Renewal\",\n\t\t\tdescription: \"Automatically renew your subscription\",\n\t\t\tenabled: true,\n\t\t\tonToggle: () => {},\n\t\t},\n\t\t{\n\t\t\tid: \"invoice-emails\",\n\t\t\tlabel: \"Invoice Emails\",\n\t\t\tdescription: \"Receive emails when invoices are generated\",\n\t\t\tenabled: true,\n\t\t\tonToggle: () => {},\n\t\t},\n\t\t{\n\t\t\tid: \"promotional-emails\",\n\t\t\tlabel: \"Promotional Emails\",\n\t\t\tdescription: \"Receive occasional updates about new features and offers\",\n\t\t\tenabled: true,\n\t\t\tonToggle: () => {},\n\t\t},\n\t],\n\tinputFields = [\n\t\t{\n\t\t\tid: \"fullName\",\n\t\t\tname: \"fullName\",\n\t\t\tdefaultValue: \"\",\n\t\t\tplaceholder: \"John Doe\",\n\t\t\tonChange: () => {},\n\t\t\tlabel: \"Full Name\",\n\t\t\ttype: \"text\",\n\t\t\trequired: true,\n\t\t},\n\t\t{\n\t\t\tid: \"billingEmail\",\n\t\t\tname: \"billingEmail\",\n\t\t\tdefaultValue: \"\",\n\t\t\tplaceholder: \"user@example.com\",\n\t\t\tonChange: () => {},\n\t\t\tlabel: \"Billing Email\",\n\t\t\thelperText: \"Invoices will be sent to this email address\",\n\t\t\ttype: \"email\",\n\t\t\trequired: true,\n\t\t},\n\t\t{\n\t\t\tid: \"taxId\",\n\t\t\tname: \"taxId\",\n\t\t\tdefaultValue: \"\",\n\t\t\tplaceholder: \"EU123456789\",\n\t\t\tonChange: () => {},\n\t\t\tlabel: \"Tax ID (Optional)\",\n\t\t\thelperText: \"For VAT or other tax purposes\",\n\t\t\ttype: \"text\",\n\t\t},\n\t],\n\tonSave = () => {},\n\tonCancel = () => {},\n\tsaveButtonText = \"Save Changes\",\n\tcancelButtonText = \"Cancel\",\n\tcurrencyOptions = [\n\t\t{ value: \"usd\", label: \"USD - US Dollar\" },\n\t\t{ value: \"inr\", label: \"INR - Indian Rupees\" },\n\t\t{ value: \"eur\", label: \"EUR - Euro\" },\n\t\t{ value: \"gbp\", label: \"GBP - British Pound\" },\n\t\t{ value: \"jpy\", label: \"JPY - Japanese Yen\" },\n\t\t{ value: \"aud\", label: \"AUD - Australian Dollar\" },\n\t\t{ value: \"cad\", label: \"CAD - Canadian Dollar\" },\n\t\t{ value: \"cny\", label: \"CNY - Chinese Yuan\" },\n\t\t{ value: \"sgd\", label: \"SGD - Singapore Dollar\" },\n\t\t{ value: \"chf\", label: \"CHF - Swiss Franc\" },\n\t\t{ value: \"zar\", label: \"ZAR - South African Rand\" },\n\t\t{ value: \"aed\", label: \"AED - UAE Dirham\" },\n\t],\n\tdefaultCurrency = \"usd\",\n\tonCurrencyChange = () => {},\n\tenableValidation = true,\n\tcurrencyRequired = true,\n}: BillingSettings2Props) {\n\tconst [validationErrors, setValidationErrors] = useState<ValidationError[]>([]);\n\tconst [currencyError, setCurrencyError] = useState<string | null>(null);\n\n\t// Validate all fields\n\tconst validateAllFields = (): boolean => {\n\t\tif (!enableValidation) return true;\n\n\t\tconst errors: ValidationError[] = [];\n\t\tlet hasCurrencyError = false;\n\n\t\t// Validate input fields\n\t\tinputFields.forEach(field => {\n\t\t\tconst value = field.value !== undefined ? field.value : field.defaultValue || \"\";\n\t\t\tconst error = validateField(value, field);\n\t\t\tif (error) {\n\t\t\t\terrors.push({ field: field.id, message: error });\n\t\t\t}\n\t\t});\n\n\t\t// Validate currency if required\n\t\tif (currencyRequired && !defaultCurrency) {\n\t\t\tsetCurrencyError(\"Please select a currency\");\n\t\t\thasCurrencyError = true;\n\t\t} else {\n\t\t\tsetCurrencyError(null);\n\t\t}\n\n\t\tsetValidationErrors(errors);\n\t\treturn errors.length === 0 && !hasCurrencyError;\n\t};\n\n\t// Handle save with validation\n\tconst handleSave = () => {\n\t\tif (validateAllFields()) {\n\t\t\tonSave();\n\t\t}\n\t};\n\n\t// Get error for a specific field\n\tconst getFieldError = (fieldId: string): string | undefined => {\n\t\treturn validationErrors.find(error => error.field === fieldId)?.message;\n\t};\n\n\t// Clear validation error for a specific field\n\tconst clearFieldError = (fieldId: string) => {\n\t\tsetValidationErrors(prev => prev.filter(error => error.field !== fieldId));\n\t};\n\n\t// Clear currency error\n\tconst clearCurrencyError = () => {\n\t\tsetCurrencyError(null);\n\t};\n\n\t// Enhanced input change handler that clears validation errors\n\tconst handleInputChange = (fieldId: string, value: string, originalOnChange: (value: string) => void) => {\n\t\t// Clear the validation error for this field when user starts typing\n\t\tclearFieldError(fieldId);\n\t\t// Call the original onChange handler\n\t\toriginalOnChange(value);\n\t};\n\n\t// Enhanced currency change handler\n\tconst handleCurrencyChange = (value: string, originalOnChange: (value: string) => void) => {\n\t\t// Clear currency error when user makes a selection\n\t\tclearCurrencyError();\n\t\t// Call the original onChange handler\n\t\toriginalOnChange(value);\n\t};\n\treturn (\n\t\t<Card className={cn('mx-auto max-w-2xl', className)}>\n\t\t\t<CardHeader>\n\t\t\t\t<CardTitle className=\"text-lg\">{title}</CardTitle>\n\t\t\t</CardHeader>\n\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\tManage your billing preferences and settings\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n\t\t\t\t\t{inputFields.map((field) => {\n\t\t\t\t\t\tconst error = getFieldError(field.id);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={field.id} className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label htmlFor={field.id}>\n\t\t\t\t\t\t\t\t\t{field.label}\n\t\t\t\t\t\t\t\t\t{field.required && <span className=\"text-red-500 ml-1\">*</span>}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\tname={field.name}\n\t\t\t\t\t\t\t\t\t{...(field.value !== undefined\n\t\t\t\t\t\t\t\t\t\t? { value: field.value }\n\t\t\t\t\t\t\t\t\t\t: { defaultValue: field.defaultValue })}\n\t\t\t\t\t\t\t\t\tplaceholder={field.placeholder}\n\t\t\t\t\t\t\t\t\tonChange={(e) => handleInputChange(field.id, e.target.value, field.onChange)}\n\t\t\t\t\t\t\t\t\ttype={field.type || \"text\"}\n\t\t\t\t\t\t\t\t\taria-describedby={field.helperText ? `${field.id}-help` : undefined}\n\t\t\t\t\t\t\t\t\tclassName={error ? \"border-red-500 focus:border-red-500\" : \"\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{error ? (\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t) : field.helperText ? (\n\t\t\t\t\t\t\t\t\t<p id={`${field.id}-help`} className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t{field.helperText}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t<Label id=\"currency-label\">\n\t\t\t\t\t\t\tCurrency\n\t\t\t\t\t\t\t{currencyRequired && <span className=\"text-red-500 ml-1\">*</span>}\n\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t<Select value={defaultCurrency} onValueChange={(value) => handleCurrencyChange(value, onCurrencyChange)}>\n\t\t\t\t\t\t\t<SelectTrigger\n\t\t\t\t\t\t\t\taria-labelledby=\"currency-label\"\n\t\t\t\t\t\t\t\tclassName={currencyError ? \"border-red-500 focus:border-red-500\" : \"\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SelectValue placeholder=\"Select currency\" />\n\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t{currencyOptions.map((option) => (\n\t\t\t\t\t\t\t\t\t<SelectItem key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t{currencyError && (\n\t\t\t\t\t\t\t<p className=\"text-xs text-red-500\">\n\t\t\t\t\t\t\t\t{currencyError}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{features.map((feature) => (\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tkey={feature.id} \n\t\t\t\t\t\t\tclassName=\"flex items-center justify-between rounded-lg border p-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"font-medium\">{feature.label}</div>\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t{feature.description}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Switch \n\t\t\t\t\t\t\t\taria-label={feature.label}\n\t\t\t\t\t\t\t\tchecked={feature.enabled}\n\t\t\t\t\t\t\t\tonCheckedChange={feature.onToggle}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex items-center justify-end gap-3 pt-2\">\n\t\t\t\t\t<Button variant=\"outline\" onClick={onCancel}>\n\t\t\t\t\t\t{cancelButtonText}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={handleSave}\n\t\t\t\t\t\tdisabled={enableValidation && (validationErrors.length > 0 || !!currencyError)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{saveButtonText}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}",
      "type": "registry:component",
      "target": "components/billingsdk/billing-settings-2.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/billing-settings-2-demo.tsx",
      "content": "'use client';\n\nimport { BillingSettings2 } from '@/components/billingsdk/billing-settings-2';\nimport { useState } from 'react';\n\nexport function BillingSettings2Demo() {\n\tconst [inputValues, setInputValues] = useState({\n\t\tfullName: '',\n\t\tbillingEmail: '',\n\t\ttaxId: '',\n\t});\n\n\tconst [featureToggles, setFeatureToggles] = useState({\n\t\tautoRenewal: true,\n\t\tinvoiceEmails: true,\n\t\tpromotionalEmails: false,\n\t});\n\n\tconst [selectedCurrency, setSelectedCurrency] = useState('usd');\n\n\tconst handleInputChange = (field: string, value: string) => {\n\t\tsetInputValues(prev => ({\n\t\t\t...prev,\n\t\t\t[field]: value\n\t\t}));\n\t};\n\n\t// Wrapper functions for the component's enhanced handlers\n\tconst createInputChangeHandler = (field: string) => (value: string) => {\n\t\thandleInputChange(field, value);\n\t};\n\n\tconst createCurrencyChangeHandler = (setCurrency: (value: string) => void) => (value: string) => {\n\t\tsetCurrency(value);\n\t};\n\n\tconst handleFeatureToggle = (feature: string, enabled: boolean) => {\n\t\tsetFeatureToggles(prev => ({\n\t\t\t...prev,\n\t\t\t[feature]: enabled\n\t\t}));\n\t};\n\n\tconst handleSave = () => {\n\t\t// Validation is handled by the component, so if we reach here, validation passed\n\t\talert('Settings saved successfully!');\n\t\tconsole.log('Input values:', inputValues);\n\t\tconsole.log('Feature toggles:', featureToggles);\n\t\tconsole.log('Selected currency:', selectedCurrency);\n\t};\n\n\tconst handleCancel = () => {\n\t\talert('Changes cancelled!');\n\t};\n\n\treturn (\n\t\t<div className=\"p-6\">\n\t\t\t<BillingSettings2\n\t\t\t\ttitle=\"Custom Billing Settings\"\n\t\t\t\tinputFields={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"fullName\",\n\t\t\t\t\t\tname: \"fullName\",\n\t\t\t\t\t\tvalue: inputValues.fullName,\n\t\t\t\t\t\tplaceholder: \"Enter your full name\",\n\t\t\t\t\t\tonChange: createInputChangeHandler('fullName'),\n\t\t\t\t\t\tlabel: \"Full Name\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalidation: {\n\t\t\t\t\t\t\tminLength: 2,\n\t\t\t\t\t\t\tmaxLength: 50,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"billingEmail\",\n\t\t\t\t\t\tname: \"billingEmail\",\n\t\t\t\t\t\tvalue: inputValues.billingEmail,\n\t\t\t\t\t\tplaceholder: \"user@example.com\",\n\t\t\t\t\t\tonChange: createInputChangeHandler('billingEmail'),\n\t\t\t\t\t\tlabel: \"Billing Email\",\n\t\t\t\t\t\thelperText: \"Invoices will be sent to this email address\",\n\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"taxId\",\n\t\t\t\t\t\tname: \"taxId\",\n\t\t\t\t\t\tvalue: inputValues.taxId,\n\t\t\t\t\t\tplaceholder: \"EU123456789\",\n\t\t\t\t\t\tonChange: createInputChangeHandler('taxId'),\n\t\t\t\t\t\tlabel: \"Tax ID (Optional)\",\n\t\t\t\t\t\thelperText: \"For VAT or other tax purposes\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\tvalidation: {\n\t\t\t\t\t\t\tpattern: /^[A-Z]{2}\\d{8,12}$/,\n\t\t\t\t\t\t\tcustomValidator: (value: string) => {\n\t\t\t\t\t\t\t\tif (value && !/^[A-Z]{2}\\d{8,12}$/.test(value)) {\n\t\t\t\t\t\t\t\t\treturn \"Tax ID should be in format: XX followed by 8-12 digits (e.g., EU123456789)\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tfeatures={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"auto-renewal\",\n\t\t\t\t\t\tlabel: \"Auto-Renewal\",\n\t\t\t\t\t\tdescription: \"Automatically renew your subscription\",\n\t\t\t\t\t\tenabled: featureToggles.autoRenewal,\n\t\t\t\t\t\tonToggle: (enabled) => handleFeatureToggle('autoRenewal', enabled),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"invoice-emails\",\n\t\t\t\t\t\tlabel: \"Invoice Emails\",\n\t\t\t\t\t\tdescription: \"Receive emails when invoices are generated\",\n\t\t\t\t\t\tenabled: featureToggles.invoiceEmails,\n\t\t\t\t\t\tonToggle: (enabled) => handleFeatureToggle('invoiceEmails', enabled),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: \"promotional-emails\",\n\t\t\t\t\t\tlabel: \"Promotional Emails\",\n\t\t\t\t\t\tdescription: \"Receive occasional updates about new features and offers\",\n\t\t\t\t\t\tenabled: featureToggles.promotionalEmails,\n\t\t\t\t\t\tonToggle: (enabled) => handleFeatureToggle('promotionalEmails', enabled),\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\tcurrencyOptions={[\n\t\t\t\t\t{ value: \"usd\", label: \"USD - US Dollar\" },\n\t\t\t\t\t{ value: \"eur\", label: \"EUR - Euro\" },\n\t\t\t\t\t{ value: \"gbp\", label: \"GBP - British Pound\" },\n\t\t\t\t]}\n\t\t\t\tdefaultCurrency={selectedCurrency}\n\t\t\t\tonCurrencyChange={createCurrencyChangeHandler(setSelectedCurrency)}\n\t\t\t\tonSave={handleSave}\n\t\t\t\tonCancel={handleCancel}\n\t\t\t\tsaveButtonText=\"Save Preferences\"\n\t\t\t\tcancelButtonText=\"Discard Changes\"\n\t\t\t/>\n\t\t</div>\n\t);\n}",
      "type": "registry:component",
      "target": "components/billing-settings-2-demo.tsx"
    }
  ]
}